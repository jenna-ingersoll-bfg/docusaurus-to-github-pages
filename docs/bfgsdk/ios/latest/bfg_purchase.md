  
# bfgPurchase Class 

<div class="contents">Manages Apple's In-App Purchases for Free-to-Play games.    <a href="interfacebfg_purchase.html#details">More...</a><code>#import &lt;<a class="el" href="bfg_purchase_8h_source.html">bfgPurchase.h</a>&gt;</code><table class="memberdecls"><tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a> Class Methods</h2></td></tr><tr class="memitem:a7fb08fc7c6042682b37757a3abce7450"><td class="memItemLeft" align="right" valign="top">(&quot;Deprecated since iOS SDK 7.0. Refer to acquireProductInformation:productId instead.&quot;)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a7fb08fc7c6042682b37757a3abce7450">\__deprecated_msg</a></td></tr><tr class="separator:a7fb08fc7c6042682b37757a3abce7450"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:adec599a6d9380e0973776b64385fa647"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#adec599a6d9380e0973776b64385fa647">acquireProductInformation:</a></td></tr><tr class="separator:adec599a6d9380e0973776b64385fa647"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a9501d8d1ac571cc6c8ea4c9af51e5750"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a9501d8d1ac571cc6c8ea4c9af51e5750">acquireProductInformationForProducts:</a></td></tr><tr class="separator:a9501d8d1ac571cc6c8ea4c9af51e5750"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:accc2f70e8646edd2fbe043388ea10ff6"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#accc2f70e8646edd2fbe043388ea10ff6">canStartPurchase:</a></td></tr><tr class="separator:accc2f70e8646edd2fbe043388ea10ff6"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a3c62d01e1728522b64e24984969ab689"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a3c62d01e1728522b64e24984969ab689">processDeferredPayments</a></td></tr><tr class="separator:a3c62d01e1728522b64e24984969ab689"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a4ed136923552aa276813abbbeb71ad51"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a4ed136923552aa276813abbbeb71ad51">hasDeferredPayments</a></td></tr><tr class="separator:a4ed136923552aa276813abbbeb71ad51"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:ac56a35738e9517995985f47e55225c7c"><td class="memItemLeft" align="right" valign="top">(&quot;Deprecated since iOS SDK 7.0. Refer to startPurchase:productId instead.&quot;)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#ac56a35738e9517995985f47e55225c7c">\__deprecated_msg</a></td></tr><tr class="separator:ac56a35738e9517995985f47e55225c7c"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:ae8532548c8c1ab9f98a0bb4dadb8f801"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#ae8532548c8c1ab9f98a0bb4dadb8f801">startPurchase:</a></td></tr><tr class="separator:ae8532548c8c1ab9f98a0bb4dadb8f801"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a463f2be6e0f9976db4e1c0e3d2974d72"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a463f2be6e0f9976db4e1c0e3d2974d72">startPurchase:details1:details2:details3:additionalDetails:</a></td></tr><tr class="separator:a463f2be6e0f9976db4e1c0e3d2974d72"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a65542382695533cd9c958610b7573e05"><td class="memItemLeft" align="right" valign="top">(&quot;Deprecated since iOS SDK 7.0. Refer to finishPurchase:productId instead.&quot;)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a65542382695533cd9c958610b7573e05">\__deprecated_msg</a></td></tr><tr class="separator:a65542382695533cd9c958610b7573e05"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:acc2e99bf4adedd1bfb58f989198d70f6"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#acc2e99bf4adedd1bfb58f989198d70f6">finishPurchase:</a></td></tr><tr class="separator:acc2e99bf4adedd1bfb58f989198d70f6"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a2123d3ffe6ed42c6986825c8d505fd16"><td class="memItemLeft" align="right" valign="top">(&quot;Deprecated since iOS SDK 7.0. Refer to isPurchaseActive:productId instead.&quot;)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a2123d3ffe6ed42c6986825c8d505fd16">\__deprecated_msg</a></td></tr><tr class="separator:a2123d3ffe6ed42c6986825c8d505fd16"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a6af92263aed810c05ef1352217e2dbfa"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a6af92263aed810c05ef1352217e2dbfa">isPurchaseActive:</a></td></tr><tr class="separator:a6af92263aed810c05ef1352217e2dbfa"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:afecc5a028712fe18e6baece34dc9970c"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#afecc5a028712fe18e6baece34dc9970c">isRestoreActive</a></td></tr><tr class="separator:afecc5a028712fe18e6baece34dc9970c"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a7c7fdc2a2f2fe472c5f0fb6f6e14e142"><td class="memItemLeft" align="right" valign="top">(&quot;Deprecated since iOS SDK 7.0. Refer to productInformation:productId instead.&quot;)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a7c7fdc2a2f2fe472c5f0fb6f6e14e142">\__deprecated_msg</a></td></tr><tr class="separator:a7c7fdc2a2f2fe472c5f0fb6f6e14e142"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a437f1c12cfcfc93ad980af7277586155"><td class="memItemLeft" align="right" valign="top">(NSDictionary \*)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a437f1c12cfcfc93ad980af7277586155">productInformation:</a></td></tr><tr class="separator:a437f1c12cfcfc93ad980af7277586155"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a2c14a1e6ebedf6086858bdf302ff0203"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a2c14a1e6ebedf6086858bdf302ff0203">restorePurchases</a></td></tr><tr class="separator:a2c14a1e6ebedf6086858bdf302ff0203"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a7e65cc9f7675225f2133d39a56fa1fe1"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a7e65cc9f7675225f2133d39a56fa1fe1">startService</a></td></tr><tr class="separator:a7e65cc9f7675225f2133d39a56fa1fe1"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:a58d0c86d6860b31d8d48fa5734e4e898"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#a58d0c86d6860b31d8d48fa5734e4e898">startService:</a></td></tr><tr class="separator:a58d0c86d6860b31d8d48fa5734e4e898"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:afb35c515fcfe08d949a83f7bee62ab42"><td class="memItemLeft" align="right" valign="top">(NSArray&lt; <a class="el" href="interfacebfg_purchase_object.html">bfgPurchaseObject</a> \* &gt; \*)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#afb35c515fcfe08d949a83f7bee62ab42">deliverablePurchases</a></td></tr><tr class="memdesc:afb35c515fcfe08d949a83f7bee62ab42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Completed purchases that have not been granted to the user.  <a href="interfacebfg_purchase.html#afb35c515fcfe08d949a83f7bee62ab42">More...</a><br /></td></tr><tr class="separator:afb35c515fcfe08d949a83f7bee62ab42"><td class="memSeparator" colspan="2">&#160;</td></tr><tr class="memitem:ac39b455f05d11d2192419842520bdd4f"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfacebfg_purchase.html#ac39b455f05d11d2192419842520bdd4f">purchaseActivityInProgress</a></td></tr><tr class="separator:ac39b455f05d11d2192419842520bdd4f"><td class="memSeparator" colspan="2">&#160;</td></tr></table><a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2><div class="textblock">Manages Apple's In-App Purchases for Free-to-Play games. If you are using these APIs, you should become an observer for the following events:<ul><li>NOTIFICATION_PURCHASE_PRODUCTINFORMATION</li><li>NOTIFICATION_PURCHASE_SUCCEEDED</li><li>NOTIFICATION_PURCHASE_FAILED</li><li>NOTIFICATION_PURCHASE_DEFERRED</li><li>NOTIFICATION_RESTORE_SUCCEEDED</li><li>NOTIFICATION_RESTORE_FAILED</li></ul>It is important to begin observing these events before starting the <a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases for Free-to-Play games.">bfgPurchase</a> service.Occasionally a game will need to support functionality beyond what is provided by <a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases for Free-to-Play games.">bfgPurchase</a>. For example, <a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases for Free-to-Play games.">bfgPurchase</a> does not support downloadable content. In this case, you can talk to your producer about setting purchaseExpertMode to "1". With purchaseExpertMode enabled, you will receive SKPaymentTransactions with your <a class="el" href="interfacebfg_purchase_object.html" title="Data for a particular In-App Purchase.">bfgPurchaseObject</a> when purchasing and restoring. It is your responsibility to call finishPurchase on both new purchases and restores if you enable expert mode. In non-expert mode, restores will close themselves.<dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div><h2 class="groupheader">Method Documentation</h2><a id="a7c7fdc2a2f2fe472c5f0fb6f6e14e142" name="a7c7fdc2a2f2fe472c5f0fb6f6e14e142"></a><h2 class="memtitle"><span class="permalink"><a href="#a7c7fdc2a2f2fe472c5f0fb6f6e14e142">&#9670;&nbsp;</a></span>\__deprecated_msg <span class="overload">[1/5]</span></h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (&quot;Deprecated since iOS SDK 7.0. Refer to) <a class="el" href="interfacebfg_purchase.html#a437f1c12cfcfc93ad980af7277586155">productInformation:</a></td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc"><dl class="section return"><dt>Returns</dt><dd>Product information related to the default product.</dd></dl><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase.html#a437f1c12cfcfc93ad980af7277586155">+ productInformation:</a></dd></dl><dl class="section user"><dt>Deprecated:\n Deprecated since iOS SDK 7.0. Refer to productInformation:productId instead.</dt><dd></dd></dl><dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div></div><a id="ac56a35738e9517995985f47e55225c7c" name="ac56a35738e9517995985f47e55225c7c"></a><h2 class="memtitle"><span class="permalink"><a href="#ac56a35738e9517995985f47e55225c7c">&#9670;&nbsp;</a></span>\__deprecated_msg <span class="overload">[2/5]</span></h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (&quot;Deprecated since iOS SDK 7.0. Refer to) <a class="el" href="interfacebfg_purchase.html#ae8532548c8c1ab9f98a0bb4dadb8f801">startPurchase:</a></td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Convenience method for calling startPurchase:details1:details2:details3:additionalDetails with nil details and nil additional details.<dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase.html#ae8532548c8c1ab9f98a0bb4dadb8f801">+ startPurchase:</a> details1:details2:details3:additionalDetails:</dd></dl><dl class="section user"><dt>Deprecated:\n Deprecated since iOS SDK 7.0. Refer to startPurchase:productId instead.</dt><dd></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a2123d3ffe6ed42c6986825c8d505fd16" name="a2123d3ffe6ed42c6986825c8d505fd16"></a><h2 class="memtitle"><span class="permalink"><a href="#a2123d3ffe6ed42c6986825c8d505fd16">&#9670;&nbsp;</a></span>\__deprecated_msg <span class="overload">[3/5]</span></h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (&quot;Deprecated since iOS SDK 7.0. Refer to) <a class="el" href="interfacebfg_purchase.html#a6af92263aed810c05ef1352217e2dbfa">isPurchaseActive:</a></td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc"><dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>The default product is currently being processed for purchase. </td></tr><tr><td class="paramname">NO</td><td>Purchase already in-flight, restore in-flight, or other restriction preventing purchase.</td></tr></table></dd></dl><dl class="section user"><dt>Deprecated:\n Deprecated since iOS SDK 7.0. Refer to isPurchaseActive:productId instead.</dt><dd></dd></dl><dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div></div><a id="a7fb08fc7c6042682b37757a3abce7450" name="a7fb08fc7c6042682b37757a3abce7450"></a><h2 class="memtitle"><span class="permalink"><a href="#a7fb08fc7c6042682b37757a3abce7450">&#9670;&nbsp;</a></span>\__deprecated_msg <span class="overload">[4/5]</span></h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (&quot;Deprecated since iOS SDK 7.0. Refer to) <a class="el" href="interfacebfg_purchase.html#adec599a6d9380e0973776b64385fa647">acquireProductInformation:</a></td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Requests product information of the default product from the App Store. This method <em>must</em> be called before the default product can be purchased.<dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase.html#a9501d8d1ac571cc6c8ea4c9af51e5750">+ acquireProductInformationForProducts:</a></dd></dl><dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>The request for product information is sent to the App Store. </td></tr><tr><td class="paramname">NO</td><td>The user is offline or the default productId is already being requested.</td></tr></table></dd></dl><dl class="section user"><dt>Deprecated:\n Deprecated since iOS SDK 7.0. Refer to acquireProductInformation:productId instead.</dt><dd></dd></dl><dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div></div><a id="a65542382695533cd9c958610b7573e05" name="a65542382695533cd9c958610b7573e05"></a><h2 class="memtitle"><span class="permalink"><a href="#a65542382695533cd9c958610b7573e05">&#9670;&nbsp;</a></span>\__deprecated_msg <span class="overload">[5/5]</span></h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (&quot;Deprecated since iOS SDK 7.0. Refer to) <a class="el" href="interfacebfg_purchase.html#acc2e99bf4adedd1bfb58f989198d70f6">finishPurchase:</a></td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Convenience method for calling finishPurchase: with the default productId.<dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase.html#acc2e99bf4adedd1bfb58f989198d70f6">+ finishPurchase:</a></dd></dl><dl class="section user"><dt>Deprecated:\n Deprecated since iOS SDK 7.0. Refer to finishPurchase:productId instead.</dt><dd></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="adec599a6d9380e0973776b64385fa647" name="adec599a6d9380e0973776b64385fa647"></a><h2 class="memtitle"><span class="permalink"><a href="#adec599a6d9380e0973776b64385fa647">&#9670;&nbsp;</a></span>acquireProductInformation:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) acquireProductInformation: </td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td><td></td></tr></table></div><div class="memdoc">Requests product information from the App Store. This method <em>must</em> be called before the requested product can be purchased.If multiple products are being requested, it is much more efficient to use acquireProductInformationForProducts: rather than repeated calls to this method.<dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase.html#a9501d8d1ac571cc6c8ea4c9af51e5750">+ acquireProductInformationForProducts:</a></dd></dl><dl class="params"><dt>Parameters</dt><dd><table class="params"><tr><td class="paramname">productId</td><td>Identifier of a product that can be purchased in game.</td></tr></table></dd></dl><dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>The request for product information is sent to the App Store. </td></tr><tr><td class="paramname">NO</td><td>The product information is already being requested.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div></div><a id="a9501d8d1ac571cc6c8ea4c9af51e5750" name="a9501d8d1ac571cc6c8ea4c9af51e5750"></a><h2 class="memtitle"><span class="permalink"><a href="#a9501d8d1ac571cc6c8ea4c9af51e5750">&#9670;&nbsp;</a></span>acquireProductInformationForProducts:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) acquireProductInformationForProducts: </td><td></td><td class="paramtype">(NSSet \*)&#160;</td><td class="paramname"><em>productIds</em></td><td></td></tr></table></div><div class="memdoc">Requests product information from the App Store. This method <em>must</em> be called before the requested products can be purchased.<dl class="params"><dt>Parameters</dt><dd><table class="params"><tr><td class="paramname">productIds</td><td>Set of identifiers of products that can be purchased in the game.</td></tr></table></dd></dl>This method will keep trying to acquire product information if connectivity issues prevent the request from succeeding.<dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>The request for product information has been sent to the App Store. </td></tr><tr><td class="paramname">NO</td><td>All productIds are already being requested.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="accc2f70e8646edd2fbe043388ea10ff6" name="accc2f70e8646edd2fbe043388ea10ff6"></a><h2 class="memtitle"><span class="permalink"><a href="#accc2f70e8646edd2fbe043388ea10ff6">&#9670;&nbsp;</a></span>canStartPurchase:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) canStartPurchase: </td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td><td></td></tr></table></div><div class="memdoc">Checks whether it is possible to purchase a product at this time.For most applications, this is the API to call. You should specify a productId that was defined in iTunes Connect by your producer.This method presents the UI to users as they begin the purchase process.In order to provide a quick result, this method does not try to connect to Big Fish Games' purchase services server. This check will occur in startPurchase before a purchase is sent to Apple.<dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>Purchase will succeed if started. </td></tr><tr><td class="paramname">NO</td><td>Purchase already in-flight, restore in-flight, or other restriction preventing purchase.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="afb35c515fcfe08d949a83f7bee62ab42" name="afb35c515fcfe08d949a83f7bee62ab42"></a><h2 class="memtitle"><span class="permalink"><a href="#afb35c515fcfe08d949a83f7bee62ab42">&#9670;&nbsp;</a></span>deliverablePurchases</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (NSArray&lt; <a class="el" href="interfacebfg_purchase_object.html">bfgPurchaseObject</a> \* &gt; \*) deliverablePurchases </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Completed purchases that have not been granted to the user. When a purchase completes, you will receive a notification of its success or failure. At this time, award the purchase to the user. This method gives you a secondary way of accessing purchases that should be awarded after the notification has fired.<dl class="section note"><dt>Note</dt><dd>You must start the <a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases for Free-to-Play games.">bfgPurchase</a> service before calling this method.</dd></dl><dl class="section return"><dt>Returns</dt><dd>Purchase objects that were successfully purchased but have not had "finishPurchase" called on them.</dd></dl><dl class="section since"><dt>Since</dt><dd>5.9 </dd></dl></div></div><a id="acc2e99bf4adedd1bfb58f989198d70f6" name="acc2e99bf4adedd1bfb58f989198d70f6"></a><h2 class="memtitle"><span class="permalink"><a href="#acc2e99bf4adedd1bfb58f989198d70f6">&#9670;&nbsp;</a></span>finishPurchase:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (void) finishPurchase: </td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td><td></td></tr></table></div><div class="memdoc">A call to this method is <em>necessary</em> for all successful purchases. Failed purchases and restores do not need to be finished.After performing the unlock and PERSISTING IT, this method must be called to take the purchase off the queue. If this method is not called, the app will be notified of the purchase every time <a class="el" href="interfacebfg_purchase.html" title="Manages Apple&#39;s In-App Purchases for Free-to-Play games.">bfgPurchase</a> is restarted. The product cannot be purchased again until the previous purchase has been finished.Calling this method on a productId that is not currently being purchased does nothing.<dl class="params"><dt>Parameters</dt><dd><table class="params"><tr><td class="paramname">productId</td><td>The ID of the product to take off the queue.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a4ed136923552aa276813abbbeb71ad51" name="a4ed136923552aa276813abbbeb71ad51"></a><h2 class="memtitle"><span class="permalink"><a href="#a4ed136923552aa276813abbbeb71ad51">&#9670;&nbsp;</a></span>hasDeferredPayments</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) hasDeferredPayments </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Used to determine if the app has deferred payments from promoted in-app purchases. <dl class="section since"><dt>Since</dt><dd>7.6.0 </dd></dl></div></div><a id="a6af92263aed810c05ef1352217e2dbfa" name="a6af92263aed810c05ef1352217e2dbfa"></a><h2 class="memtitle"><span class="permalink"><a href="#a6af92263aed810c05ef1352217e2dbfa">&#9670;&nbsp;</a></span>isPurchaseActive:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) isPurchaseActive: </td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td><td></td></tr></table></div><div class="memdoc"><dl class="params"><dt>Parameters</dt><dd><table class="params"><tr><td class="paramname">productId</td><td>ID of product to query if purchase is active.</td></tr></table></dd></dl><dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>Purchase is being processed. </td></tr><tr><td class="paramname">NO</td><td>Purchase already in-flight, restore in-flight, or other restriction preventing purchase.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div></div><a id="afecc5a028712fe18e6baece34dc9970c" name="afecc5a028712fe18e6baece34dc9970c"></a><h2 class="memtitle"><span class="permalink"><a href="#afecc5a028712fe18e6baece34dc9970c">&#9670;&nbsp;</a></span>isRestoreActive</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) isRestoreActive </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc"><dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>Restore is being processed or verified. </td></tr><tr><td class="paramname">NO</td><td>Restore in-flight or other restriction preventing restore.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a3c62d01e1728522b64e24984969ab689" name="a3c62d01e1728522b64e24984969ab689"></a><h2 class="memtitle"><span class="permalink"><a href="#a3c62d01e1728522b64e24984969ab689">&#9670;&nbsp;</a></span>processDeferredPayments</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (void) processDeferredPayments </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Used to process deferred payments from promoted in-app purchases. <dl class="section since"><dt>Since</dt><dd>7.6.0 </dd></dl></div></div><a id="a437f1c12cfcfc93ad980af7277586155" name="a437f1c12cfcfc93ad980af7277586155"></a><h2 class="memtitle"><span class="permalink"><a href="#a437f1c12cfcfc93ad980af7277586155">&#9670;&nbsp;</a></span>productInformation:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (NSDictionary \*) productInformation: </td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td><td></td></tr></table></div><div class="memdoc">Product information is obtained from Apple during acquireProductInformationForProducts: and held in a transient dictionary.<b>Games should not persist this data but should acquire it on each launch from the iTunes Store.</b><dl class="section return"><dt>Returns</dt><dd>A dictionary of information regarding the product with the following keys (pre-processor defines): </dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">PRODUCT_INFO_PRODUCT_ID</td><td>Apple ID of the product. </td></tr><tr><td class="paramname">PRODUCT_INFO_PRICE</td><td>Price as a number. </td></tr><tr><td class="paramname">PRODUCT_INFO_PRICE_STR</td><td>Price as localized string. </td></tr><tr><td class="paramname">PRODUCT_INFO_TITLE</td><td>Title of product. </td></tr><tr><td class="paramname">PRODUCT_INFO_DESCRIPTION</td><td>Description of product. </td></tr><tr><td class="paramname">PRODUCT_INFO_CURRENCY</td><td>Currency price is denoted in.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.0.0 </dd></dl></div></div><a id="ac39b455f05d11d2192419842520bdd4f" name="ac39b455f05d11d2192419842520bdd4f"></a><h2 class="memtitle"><span class="permalink"><a href="#ac39b455f05d11d2192419842520bdd4f">&#9670;&nbsp;</a></span>purchaseActivityInProgress</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) purchaseActivityInProgress </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Checks if a purchase / restore is in progress. Should not be displayed.<dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>Purchase or restore in progress. </td></tr><tr><td class="paramname">NO</td><td>Purchase already in-flight, restore in-flight, or other restriction preventing purchase.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a2c14a1e6ebedf6086858bdf302ff0203" name="a2c14a1e6ebedf6086858bdf302ff0203"></a><h2 class="memtitle"><span class="permalink"><a href="#a2c14a1e6ebedf6086858bdf302ff0203">&#9670;&nbsp;</a></span>restorePurchases</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (void) restorePurchases </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Restores previous purchases. Receives the same NOTIFICATION_PURCHASE_SUCCEEDED notification as the original purchase.<dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="ae8532548c8c1ab9f98a0bb4dadb8f801" name="ae8532548c8c1ab9f98a0bb4dadb8f801"></a><h2 class="memtitle"><span class="permalink"><a href="#ae8532548c8c1ab9f98a0bb4dadb8f801">&#9670;&nbsp;</a></span>startPurchase:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (void) startPurchase: </td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td><td></td></tr></table></div><div class="memdoc">Convenience method for calling startPurchase:details1:details2:details3:additionalDetails with the default productId, nil details, and nil additional details.<dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase.html#ae8532548c8c1ab9f98a0bb4dadb8f801">+ startPurchase:</a> details1:details2:details3:additionalDetails:</dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a463f2be6e0f9976db4e1c0e3d2974d72" name="a463f2be6e0f9976db4e1c0e3d2974d72"></a><h2 class="memtitle"><span class="permalink"><a href="#a463f2be6e0f9976db4e1c0e3d2974d72">&#9670;&nbsp;</a></span>startPurchase:details1:details2:details3:additionalDetails:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (void) <a class="el" href="interfacebfg_purchase.html#ae8532548c8c1ab9f98a0bb4dadb8f801">startPurchase:</a></td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>productId</em></td></tr><tr><td class="paramkey">details1:</td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>details1</em></td></tr><tr><td class="paramkey">details2:</td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>details2</em></td></tr><tr><td class="paramkey">details3:</td><td></td><td class="paramtype">(NSString \*)&#160;</td><td class="paramname"><em>details3</em></td></tr><tr><td class="paramkey">additionalDetails:</td><td></td><td class="paramtype">(NSDictionary \*)&#160;</td><td class="paramname"><em>additionalDetails</em>&#160;</td></tr><tr><td></td><td></td><td></td><td></td></tr></table></div><div class="memdoc">Attempt an In-App Purchase with the iTunes store.<dl class="params"><dt>Parameters</dt><dd><table class="params"><tr><td class="paramname">productId</td><td>Identifier of product to be purchased. Originates from the iTunes Store. </td></tr><tr><td class="paramname">details1</td><td>An alpha-numeric label to categorize the event. May be <em>nil</em>. </td></tr><tr><td class="paramname">details2</td><td>An alpha-numeric label to categorize the event. May be <em>nil</em>. </td></tr><tr><td class="paramname">details3</td><td>An alpha-numeric label to categorize the event. May be <em>nil</em>. </td></tr><tr><td class="paramname">additionalDetails</td><td>Additional data to be associated with this productId. This value may be <em>nil</em>. If not nil, the value <em>must</em> be a flat dictionary containing only NSString \* as keys and values.</td></tr></table></dd></dl>This method posts one of the following notifications on the main thread:<ul><li>NOTIFICATION_PURCHASE_SUCCEEDED &ndash; Perform the unlock, persist the purchase, and call finishPurchase:</li><li>NOTIFICATION_PURCHASE_FAILED &ndash; Inform the user the purchase failed.</li></ul>These notifications contain userInfo, with BFG_PURCHASE_OBJECT_USER_INFO_KEY as a key to the (<a class="el" href="interfacebfg_purchase_object.html" title="Data for a particular In-App Purchase.">bfgPurchaseObject</a> \*)purchaseObject<dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacebfg_purchase_object.html" title="Data for a particular In-App Purchase.">bfgPurchaseObject</a></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a7e65cc9f7675225f2133d39a56fa1fe1" name="a7e65cc9f7675225f2133d39a56fa1fe1"></a><h2 class="memtitle"><span class="permalink"><a href="#a7e65cc9f7675225f2133d39a56fa1fe1">&#9670;&nbsp;</a></span>startService</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) startService </td><td></td><td class="paramname"></td><td></td></tr></table></div><div class="memdoc">Calling startService on bfgPurchases enables its functionality and causes it to resume processing any operations that were already in progress. All notification listeners should be set up prior to calling start.<dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>Purchase has started. </td></tr><tr><td class="paramname">NO</td><td>Purchase has previously started.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.2.0 </dd></dl></div></div><a id="a58d0c86d6860b31d8d48fa5734e4e898" name="a58d0c86d6860b31d8d48fa5734e4e898"></a><h2 class="memtitle"><span class="permalink"><a href="#a58d0c86d6860b31d8d48fa5734e4e898">&#9670;&nbsp;</a></span>startService:</h2><div class="memitem"><div class="memproto"><table class="memname"><tr><td class="memname">+ (BOOL) startService: </td><td></td><td class="paramtype">(NSError \*\__autoreleasing \*)&#160;</td><td class="paramname"><em>error</em></td><td></td></tr></table></div><div class="memdoc">Calling startService on bfgPurchases enables its functionality and causes it to resume processing any operations that were already in progress. All notification listeners should be set up prior to calling start.<dl class="params"><dt>Parameters</dt><dd><table class="params"><tr><td class="paramname">error</td><td>If service fails to start, error will contain the reason. Otherwise error is nil.</td></tr></table></dd></dl><dl class="section return"><dt>Returns</dt><dd></dd></dl><dl class="retval"><dt>Return values</dt><dd><table class="retval"><tr><td class="paramname">YES</td><td>Purchase has started. </td></tr><tr><td class="paramname">NO</td><td>Purchase has previously started.</td></tr></table></dd></dl><dl class="section since"><dt>Since</dt><dd>4.7.0 </dd></dl></div></div></div> 
